import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as p,f as e,a as n,b as i,r as h,o as t}from"./app-pkVOlWE-.js";const r={};function d(k,s){const a=h("Mermaid");return t(),p("div",null,[s[0]||(s[0]=e(`<h1 id="核心数据流架构" tabindex="-1"><a class="header-anchor" href="#核心数据流架构"><span>核心数据流架构</span></a></h1><h2 id="整体架构概览" tabindex="-1"><a class="header-anchor" href="#整体架构概览"><span>整体架构概览</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>┌─────────────────────────────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                                     neo_bpsys_wpf.Core                                │</span></span>
<span class="line"><span>│                                                                                           │</span></span>
<span class="line"><span>│  ┌─────────────┐     ┌──────────┐     ┌─────────────┐     ┌──────────────┐     ┌───────┐  │</span></span>
<span class="line"><span>│  │   Models    │────▶│  Enums   │────▶│ ValueTypes  │────▶│  Interfaces  │────▶│ Events│  │</span></span>
<span class="line"><span>│  └─────────────┘     └──────────┘     └─────────────┘     └──────────────┘     └───────┘  │</span></span>
<span class="line"><span>│         │                                                                 ▲               │</span></span>
<span class="line"><span>│         │                                                                 │               │</span></span>
<span class="line"><span>│         ▼                                                                 │               │</span></span>
<span class="line"><span>│  ┌─────────────────────┐                                                  │               │</span></span>
<span class="line"><span>│  │  Core Business Logic│◀─────────────────────────────────────────────────┘               │</span></span>
<span class="line"><span>│  └─────────────────────┘                                                                  │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                         ▲                                  │</span></span>
<span class="line"><span>                         │                                  │</span></span>
<span class="line"><span>                         │                                  ▼</span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                                  neo_bpsys_wpf (主项目)                                      │</span></span>
<span class="line"><span>│                                                                                           │</span></span>
<span class="line"><span>│  ┌─────────────┐     ┌──────────────┐     ┌─────────────┐     ┌───────────────────┐       │</span></span>
<span class="line"><span>│  │  ViewModels │────▶│     Views    │────▶│ Converters  │────▶│   UI Controls     │       │</span></span>
<span class="line"><span>│  └─────────────┘     └──────────────┘     └─────────────┘     └───────────────────┘       │</span></span>
<span class="line"><span>│         ▲                                                                             │</span></span>
<span class="line"><span>│         │                                                                             │</span></span>
<span class="line"><span>│         └─────────────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────────────────────────────────────┘</span></span>
<span class="line"><span>                         ▲</span></span>
<span class="line"><span>                         │</span></span>
<span class="line"><span>                         │</span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                                  插件系统 (Plugin)                                          │</span></span>
<span class="line"><span>│                                                                                           │</span></span>
<span class="line"><span>│  ┌─────────────┐     ┌───────────────────┐                                                │</span></span>
<span class="line"><span>│  │   Plugins   │────▶│ ISharedDataService│─────────────────────────────────────────────────▶│</span></span>
<span class="line"><span>│  └─────────────┘     └───────────────────┘                                                │</span></span>
<span class="line"><span>└─────────────────────────────────────────────────────────────────────────────────────────────┘</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="详细数据流流程" tabindex="-1"><a class="header-anchor" href="#详细数据流流程"><span>详细数据流流程</span></a></h2><h3 id="_1-数据结构定义-core-项目" tabindex="-1"><a class="header-anchor" href="#_1-数据结构定义-core-项目"><span>1. 数据结构定义（.Core 项目）</span></a></h3>`,5)),n(a,{code:"eJxLy8kvT85ILCpRCHHhUgACx2g95/yiVIWXC3c+n70uVkFX107BKfrZgh1P9zc/W7Hw6bzuWIg6sIxz9LN5s57s2Pd84264DJhwgmg0jHYGGp6YXJJapJdcDJGHShlFuyfmpqKLGkeHpCbmoouaRPum5iZhmmEaHZCTWIkkDpE0hcoaRisVAL2WmZijkJyTWFysAFGtYKXgn1ScWlSWmJST6p+UlZpcogQ11tQQphWoNxqhKqAovyC1qKQyVqGgKLMssSRVAe4ve4V4UACC2daY5hgRMCckMSc1r0QhvgRMA/UDAKPCf/M="}),s[1]||(s[1]=i("h3",{id:"_2-数据变更流程",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_2-数据变更流程"},[i("span",null,"2. 数据变更流程")])],-1)),n(a,{code:"eJxtkktLAlEUx/d9isNs0kWCtYyKGrNcVEKvxdDillcNdCYmy6IJojc90CIHKQiKqCEilSJS69t4r9O36D6stLqLs7jn9//f87jRhJGeiyMzBROBNmCnX6O5Ij1+JJk8vXimlewMdHT0WjRzWqu+0H279lqtO4ekkrFgQBtnShwJoBQax+by/ByeER4DQuIWt+pnDrXL9ClngaqphomBOlfk8lBiIiwuzcZMtBAHH8+LK35UbgGqX1MmMEpCioce0HHa4+1WpFxgfsl1agpHfKMoiRnXLkT+9ha0U6JdmuLe3ZLMCYzpYdNYwGZqVY0jPYYjHp3JjaiHu3i9DS3WIz/Vql2iNVIou6Ur8pZjDbJBkSPbgsAazRdI9vZvrm9daANykPmCBYNfNZAbm5Q2SemSbtzBr2oa70sZM7YgqCnT4SC4e/fkwCE32/XsLtnd+dhypIFcWUMmwqBoeUjj4wjpUSOMYnhqHqdHjAhO+Pgtb1UKgoIdbmF9KyiZgHr1hDyeN9kOCTTENqovs4KxCe77Az2+lsiwzP6zYlb89zpCkmILngwB/2l2sWngn3AT+Uw="}),s[2]||(s[2]=i("h3",{id:"_3-完整数据变更到ui更新流程",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#_3-完整数据变更到ui更新流程"},[i("span",null,"3. 完整数据变更到UI更新流程")])],-1)),n(a,{code:"eJx9ks9P1EAUx+/8FXNcEtl43sRNZImmB7TJ7urBeBjbR2lsp+u0hXAjAcSIZMUgMZCsIom7MUYgosasP/4Zpy3/BdOZZUrbXXqYyfR9P2/evO/z4VkIxIA5G1sUu1OIfx1MA9uwO5gESHdCyyYI+yjqvvk//FESNBcxBXMOBzgVZacm0CXbgJK+4VGY90xwUnl6QNHgkPW2SsIHNiwrYQuwq5EFT8cWqEAJeajfScXpFg932Nf9+NswHr4fUwNZAhoAlTU4Hm15szT0F1WghLS1VMtXtrEWn30QcbHIBs3U69nTa+i279sWafA/2ODZWt48uE+AVlyxaeYNZFzGNHNa5Mlwnks1qYYkUlW50C1EYFkdBavkeTTpf2LdHaRTr8MftcIZYoFZIdgFb6GiUkzLAsSCnQCx41/J6SH7/TbeHbDuO/ZqT4SKFykbaqgRUgokuMsTI3bai1b7nIsOzhSntHnuPplUW5ZwVF0xC/e4JoyOjlaj71vsxUm+ivz9XHjJnG9uR3snSf8o6r2WQ5L8PGZ/18dps9y6g1eA+o9uPq5KK68YUuiR5NUkcRv+fIm2PyIFVGex8dSiXkhMMXtXujti8rwQoZk6anqOLRExrGO5tsYv/LfLDnoT5W1tpOMd4q0oDDU4Pm/f843ztYGyctIIFJqUvfDe9R4km5/Zy4G8XnqQ4gKK99eLBRFz6gINw8Wz"}),s[3]||(s[3]=e(`<h2 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h2><h3 id="_1-core-项目结构" tabindex="-1"><a class="header-anchor" href="#_1-core-项目结构"><span>1. .Core 项目结构</span></a></h3><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>neo_bpsys_wpf.Core/</span></span>
<span class="line"><span>├─ Models/</span></span>
<span class="line"><span>│   ├─ Character.cs</span></span>
<span class="line"><span>│   ├─ Character.cs</span></span>
<span class="line"><span>│   ├─ Talent.cs</span></span>
<span class="line"><span>│   ├─ Game.cs </span></span>
<span class="line"><span>│   ├─ Player.cs</span></span>
<span class="line"><span>│   ├─ Score.cs</span></span>
<span class="line"><span>│   ├─ Team.cs</span></span>
<span class="line"><span>│   └─ ...  </span></span>
<span class="line"><span>├─ Enums/</span></span>
<span class="line"><span>│   ├─ BanListName.cs</span></span>
<span class="line"><span>│   ├─ Camp.cs</span></span>
<span class="line"><span>│   ├─ GameAction.cs</span></span>
<span class="line"><span>│   └─ ...  </span></span>
<span class="line"><span>└─ Abstractions/</span></span>
<span class="line"><span>	└─ Services/</span></span>
<span class="line"><span>		├─ IFrontService.cs</span></span>
<span class="line"><span>    	└─ ISharedDataService.cs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-数据流关键点说明" tabindex="-1"><a class="header-anchor" href="#_2-数据流关键点说明"><span>2. 数据流关键点说明</span></a></h3><h4 id="a-对象引用变化处理-如更换character" tabindex="-1"><a class="header-anchor" href="#a-对象引用变化处理-如更换character"><span>a) 对象引用变化处理（如更换Character）</span></a></h4><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-csharp"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// SharedDataService.cs</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> AssignCharacterToMember</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Guid</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> memberId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Guid</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> characterId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//此方法实际并不存在，程序中直接用的赋值</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> member</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> GetMemberById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">memberId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> oldCharacter</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> member</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Character</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    var</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> newCharacter</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> GetCharacterById</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">characterId</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    </span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">oldCharacter</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> newCharacter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        member</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Character</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> newCharacter</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // 触发Member.Character的PropertyChanged</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        // WPF会自动更新绑定到Member.Character的所有UI</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-csharp"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// TeamInfoPageViewModel.cs</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 不需要特殊处理 - WPF会自动更新{Binding Players[0].Member.Character.Name}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="b-对象替换处理-如更换currentgame" tabindex="-1"><a class="header-anchor" href="#b-对象替换处理-如更换currentgame"><span>b) 对象替换处理（如更换CurrentGame）</span></a></h4><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-csharp"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// SharedDataService.cs</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">private</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> Game</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> _currentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> event</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;"> EventHandler</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> CurrentGameChanged</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Game</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> CurrentGame</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    get</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_currentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    set</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    {</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">        if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">_currentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">            _currentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">            CurrentGameChanged</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">?.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">EventArgs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">Empty</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> StartNewGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    CurrentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> new </span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Game</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(); </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// 会触发CurrentGameChanged</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-csharp"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">// TeamInfoPageViewModel.cs</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> TeamInfoPageViewModel</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ISharedDataService</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> sharedData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    _sharedData</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> sharedData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">    _sharedData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CurrentGameChanged</span><span style="--shiki-light:#383A42;--shiki-dark:#C678DD;"> +=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">e</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) =&gt; </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">        OnPropertyChanged</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(nameof(</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">CurrentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">));</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Game</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;"> CurrentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> =&gt; </span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">_sharedData</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">CurrentGame</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xaml line-numbers-mode" data-highlighter="shiki" data-ext="xaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-xaml"><span class="line"><span>&lt;!-- TeamInfoPage.xaml --&gt;</span></span>
<span class="line"><span>&lt;TextBlock Text=&quot;{Binding CurrentGame.Players[0].Member.Character.Name}&quot;/&gt;</span></span>
<span class="line"><span>&lt;!-- 当CurrentGame对象被替换时，会重新解析整个绑定路径 --&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11))])}const v=l(r,[["render",d]]),A=JSON.parse('{"path":"/dev/data-flow.html","title":"核心数据流架构","lang":"zh-CN","frontmatter":{"description":"核心数据流架构 整体架构概览 详细数据流流程 1. 数据结构定义（.Core 项目） 2. 数据变更流程 3. 完整数据变更到UI更新流程 Example 1. .Core 项目结构 2. 数据流关键点说明 a) 对象引用变化处理（如更换Character） b) 对象替换处理（如更换CurrentGame）","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"核心数据流架构\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-02-19T07:38:30.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zero PLFJY\\",\\"url\\":\\"https://plfjy.top/\\"}]}"],["meta",{"property":"og:url","content":"https://bpsys.plfjy.top/dev/data-flow.html"}],["meta",{"property":"og:site_name","content":"neo-bpsys-wpf"}],["meta",{"property":"og:title","content":"核心数据流架构"}],["meta",{"property":"og:description","content":"核心数据流架构 整体架构概览 详细数据流流程 1. 数据结构定义（.Core 项目） 2. 数据变更流程 3. 完整数据变更到UI更新流程 Example 1. .Core 项目结构 2. 数据流关键点说明 a) 对象引用变化处理（如更换Character） b) 对象替换处理（如更换CurrentGame）"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-19T07:38:30.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-19T07:38:30.000Z"}]]},"git":{"createdTime":1771486710000,"updatedTime":1771486710000,"contributors":[{"name":"PLFJY","username":"PLFJY","email":"zero_plfjy@outlook.com","commits":1,"url":"https://github.com/PLFJY"}]},"readingTime":{"minutes":2.06,"words":618},"filePathRelative":"dev/data-flow.md","autoDesc":true}');export{v as comp,A as data};
